#!/bin/sh

xrandr --output LVDS1 --mode 1366x768

export VGA=/sys/class/drm/card0-VGA-1/

while inotifywait -e modify,create,delete,open,close,close_write,access $VGA/status;
	status="$(cat $VGA/status)"
do
	echo $status

	if [ "${status}" = disconnected ]; then
		xrandr --output VGA1 --off
	elif [ "${status}" = connected ]; then
		if grep "ViewSonic" $VGA/edid; then
			xrandr --output VGA1 --auto --left-of LVDS1
		else
			xrandr --auto
			cat $VGA/edid
		fi
	fi

	xrandr --output LVDS1 --mode 1366x768
done